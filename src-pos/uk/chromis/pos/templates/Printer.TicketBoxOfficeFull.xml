<?xml version="1.0" encoding="UTF-8"?>
<!-- 
   Chromis POS - The New Face of Open Source POS 
   Copyright (c) (c) 2015-2016Chromis , previous uniCenta & Openbravo POS works   

   This file is part of chromis oPOS

   Chromis POS is free software: you can redistribute it and/or modify
   it under the terms of the GNU General Public License as published by
   the Free Software Foundation, either version 3 of the License, or
   (at your option) any later version.

   Chromis POS is distributed in the hope that it will be useful,
   but WITHOUT ANY WARRANTY; without even the implied warranty of
   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
   GNU General Public License for more details.

   You should have received a copy of the GNU General Public License
   along with Chromis POS.  If not, see <http://www.gnu.org/licenses/>.
 -->

<output>

<ticket>

	<image>Printer.Ticket.Logo</image>
	<line></line>

	<line><text align="center" length="42">Chromis POS</text></line>
	<line><text align="center" length="42">The New Face of Open source POS</text></line>
	<line><text align="center" length="42">Copyright (c) (c) 2015-2016Chromis</text></line>
	<line><text align="center" length="42">Printer.TicketBoxOfficeFull</text></line>
	<line></line>
	<line></line>
#set($ticketNumber = 0)
#set($currentshowid = "")

#foreach ($ticketline in $ticket.getLinesByShow())

	#if( $ticketline.isProductBoxOffice() )
		#set($start = 1)
		#set($end = $ticketline.getMultiply())
		#set($range = [$start..$end])
		#set($show = $ticketline.getShow())
		#set($return = ($currentshowid == "" || $currentshow != $show.getID()) )

		#if($currentshowid == "" || $currentshowid != $show.getID())
	<line></line>
			#set($currentshowid = $show.getID())
			#set($theatre = $show.getTheatre())
			#set($features = $show.getShowFeatures())
	<line size="2"><text align="left" length="21" underline="true" bold="true">${theatre.getName().toUpperCase()}</text></line>
			#if($ticketline.getExtraDescription() != "")
	<line></line>
	<line><text align="left" length="42">${theatre.getExtraDescription()}</text></line>
			#end
	<line></line>
	<line></line>
	<line></line>
	<line size="1"><text align="left" length="42" bold="true">${ticketline.printShowDate()}</text></line>
			#foreach($feature in $features)
	<line><text align="left" length="9">${feature.getStartTime()}</text><text align="left" length="28" bold="true">${feature.getFeatureName()}</text><text align="left" length="5">${feature.getRatingName()}</text></line>
			#end
	<line></line>
	<line></line>
		#end


		#foreach($i in $range)
	<line><text>------------------------------------------</text></line>
	<line></line>
	#set($ticketNumber = $ticketNumber + 1)
	<line size="1"><text align="left" length="9">ADMIT ONE</text><text align="right" length="32">#${ticketNumber}</text></line>
	<line size="3"><text align="left" length="11" bold="true">${ticketline.printName()}</text><text align="right" length="10">${ticketline.printPriceTax()}</text></line>
			#if($ticketline.getTax() > 0)
	<line><text>Price includes ${ticketline.printTax()} tax</text></line>
			#end
		#end

	#end
#end
	<line></line>
	<line><text align="left" length="42">Purchased ${ticket.printDate()}</text></line>

</ticket>

</output>
